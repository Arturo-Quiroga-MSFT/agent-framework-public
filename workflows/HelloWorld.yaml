#
# This workflow provides the most basic example of providing a response that includes the user and environment input.
#
# No agent setup is required to run this workflow.
#
kind: AdaptiveDialog
beginDialog:

  kind: OnActivity
  id: workflow_demo
  actions:

    # Test init // %%% REMOVE
    - kind: SetVariable
      id: set_count
      variable: Global.RunCount
      value: =Global.RunCount + 1

    # Capture input
    - kind: SetVariable
      id: set_user_input
      variable: Topic.UserInput
      value: =System.LastMessageText

    # Capture environment variable
    - kind: SetVariable
      id: set_user_name
      variable: Global.UserName
      value: =Env.USERNAME

    # Respond with input
    - kind: SendActivity
      id: send_result
      activity: |-
        Hello {Global.UserName},
        You said, "{Topic.UserInput}"
        (x{Global.RunCount})